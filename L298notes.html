<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>L298 Arduino notes</title>
    <meta name="author" content="Andy Heilveil (github/980f)">
  </head>
  <body>
    <p>L298 cheat sheet</p>
    <p>Dual H-Bridge on usual Arduino adaptor.<br>
      <br>
      Seeedstudio V1.1 connections using 'FourBanger from 980f's motordrivers.h:<br>
      xp/xn/en 8/11/9<br>
      yp/yn/en 12/13/10<br>
      Note DuplicateOutput classfor helping to run the enables or the bridges in parallel.</p>
    <p>Motor voltage must be at least 2.5V greater than logic voltage, 7.5 for 5V logic, but also 7V minimum.<br>
      Maximum motor voltage is 46 V.<br>
      Maximum load per channel is 2A DC, perhaps 2.5 A if pulses leave enough off time, 3A for 100uS pulses.<br>
      You may successfully tie the two together for double the capacity.</p>
    <p>External clamp diodes are suggested for any inductive load, such as all motors.</p>
    <p>It can pull 70ma from the logic supply when an output is on, typically 50.<br>
      It still takes 5..10ma when drivers are off.</p>
    <p>Logic thresholds are 1.5V and 2.3V regardless of supply voltage, at -10/100 uA load.<br>
      Nearly 2V and possible 5V are lost in the H-bridge! For a 12V load consider using a 15V supply.<br>
      The sense resistor will be fed 2V.</p>
    <p>Don't expect more than 25kHz performance, although you might be able to push to 40kHz with some loads.</p>
    <p>Enable is active high, pull that sucker down with a resistor else the load might move during processor reset and download.<br>
      The other 2 controls are "one way", "the other", and if both "don't move". When disabled expect the motor to slow down and stop due to pushing some current through the part, but preferably through external diodes.</p>
    <p>Multiwatt15 package is used, mounted on a heat sink.</p>
    <p>Freestanding WB291111:</p>
    <p>It is essential to not use the pullups when you are using 3.3V logic to drive the board.</p>
    <p>I do not use the pullups so that I can access 5V VCC from the jumpers for them.<br>
      I soldered the connection for CS1 to its ground, jumpered CS2 to CS1 and then used the CS2 ground for the GND to pair with the 5V accessed via U1 jumper. Pullups are not a particularly good choice for this device, pulldowns would have made more sense when attached to a logic source as that is the inactive level for all signals. The pullups should only be used when controlling the board from simple contacts or open-collector drivers.</p>
    <hr>
    <p><br>
      Use a DRV8871 or DRV8833 board when ever possible instead of L29x boards, they waste a lot less power and don't lose nearly as much voltage (typically).</p>
    <table border="1">
      <tbody>
        <tr>
          <td>H-bridges</td>
          <td>L298 (dual full)</td>
          <td>L293 (4 half-H)</td>
          <td>DRV8871 (single)</td>
          <td>DRV8833 (dual)</td>
        </tr>
        <tr>
          <td>amps</td>
          <td>2</td>
          <td>1.0, -D 600ma<br>
            The -D has protection diodes</td>
          <td>3.5</td>
          <td>1.5 each</td>
        </tr>
        <tr>
          <td>overhead</td>
          <td>2 .. 5 V </td>
          <td>1.8</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>resistance</td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>.36/.32</td>
          <td>.25/.20</td>
        </tr>
        <tr>
          <td>clamp</td>
          <td>none</td>
          <td><br>
          </td>
          <td>0.8V</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>logic low</td>
          <td>&lt;1.5V</td>
          <td>1.5</td>
          <td>0.5</td>
          <td>0.7</td>
        </tr>
        <tr>
          <td>logic high</td>
          <td>&gt;2.3V</td>
          <td>2.3</td>
          <td>1.5</td>
          <td>2.0</td>
        </tr>
        <tr>
          <td>logic max</td>
          <td>7 (no pin)</td>
          <td>7</td>
          <td>5.5 (7)</td>
          <td>5.75</td>
        </tr>
        <tr>
          <td>min VM</td>
          <td>V+ of logic + 2.5<br>
            and at least 7</td>
          <td>V+ of logic</td>
          <td>6.5</td>
          <td>2.7</td>
        </tr>
        <tr>
          <td>max VM</td>
          <td>46</td>
          <td>36</td>
          <td>45</td>
          <td>10.8</td>
        </tr>
        <tr>
          <td>idle</td>
          <td>5 .. 10 ma </td>
          <td>~8 mA </td>
          <td>10 uA</td>
          <td>2.5 uA</td>
        </tr>
        <tr>
          <td>active</td>
          <td>high</td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>Notes</td>
          <td>has current sense point<br>
            but no associated logic</td>
          <td>clamps overshoot at VM+1.3<br>
            -1.3&nbsp; (roughly two Si diodes)<br>
            <br>
            requires complementary controls <br>
            compared to others</td>
          <td>has pulldowns on controls<br>
            has thermal shutdown<br>
            has overcurrent shutdown<br>
            has undervoltage shutdown<br>
            has current limiter</td>
          <td>has pulldowns on controls<br>
            has thermal shutdown<br>
            has overcurrent shutdown<br>
            has undervoltage shutdown<br>
            has current limiter<br>
            has fault indicator output</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td colspan="4">The bipolar devices voltage loss is somewhat current dependent but has a higher minimum than <br>
            the FET devices whose loss is very current dependent, very little at low current.<br>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
